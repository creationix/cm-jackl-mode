("object"==typeof module&&"object"==typeof module.exports&&function(e){module.exports=e()}||"function"==typeof define&&function(e){define("domchanger",e)}||function(e){window.domChanger=e()})(function(){"use strict"
function e(n,o,a){function i(){O.parentNode.appendChild(O),Object.keys(b).forEach(function(e){var t=b[e]
t.el?o.appendChild(t.el):t.append&&t.append()})}function l(){O.parentNode.removeChild(O),O=null,u(b),delete C.update,delete C.destroy,delete C.handleEvent,j()}function u(e){Object.keys(e).forEach(function(t){var n=e[t]
n.el?n.el.parentNode.removeChild(n.el):n.destroy&&n.destroy(),delete e[t],n.children&&u(n.children)})}function f(){var e=t(g.apply(null,y))
p(o,e,b)}function p(t,n,o){Object.keys(o).forEach(function(e){if(!n[e]){var t=o[e]
t.destroy?t.destroy():t.el.parentNode.removeChild(t.el),delete o[e]}}),Object.keys(n).forEach(function(a){var i=o[a],c=n[a]
if(c.text)return i?c.text!==i.text&&(i.text=c.text,i.el.nodeValue=c.text):i=o[a]={text:c.text,el:document.createTextNode(c.text)},void t.appendChild(i.el)
if(c.component)return i||(i=o[a]=e(c.component,t,C)),i.update.apply(null,c.data),void i.append()
if(c.tagName)return i||(i=o[a]={tagName:c.tagName,el:document.createElement(c.tagName),children:{}},c.ref&&(i.ref=c.ref,v[i.ref]=i.el)),c.props!==i.props&&(r(i.el,c.props,i.props),i.props=c.props),c.children&&p(i.el,c.children,i.children),void t.appendChild(i.el)
throw Error("This shouldn't happen")})}function s(){y=d.call(arguments),f()}function m(){if(!a)throw Error("Can't emit events from top-level component")
a.handleEvent.apply(null,arguments)}function h(e){var t=x[e]
if(!t){if(a)return a.handleEvent.apply(null,arguments)
throw Error("Missing event handler for "+e)}t.apply(null,d.call(arguments,1))}var v={},y=[],b={},E=n(m,f,v),g=E.render,x=E.on||{},j=E.cleanup||c,C={update:s,destroy:l,append:i,handleEvent:h},O=document.createComment(n.name)
return o.appendChild(O),C}function t(e){function t(e,r){var o,a,c
if("number"==typeof r&&(r+=""),"string"==typeof r)o="text"
else{if(!Array.isArray(r))throw console.error(r),new TypeError("Invalid item")
if(!r.length)return
if(a=r[0],"function"==typeof a)o="component"
else{if("string"!=typeof a)return void r.forEach(function(n){t(e,n)})
c=n(r),o="element"}}for(var l,u=0,f="element"===o?c.ref||c.name:"component"===o?r.key||r[0].name:o;e[l=f+"-"+u++];);var p
if("text"===o)return void(e[l]={text:r})
if("element"===o){var d={}
return p=e[l]={tagName:c.name},i(c.props)||(p.props=c.props),c.ref&&(p.ref=c.ref),c.body.forEach(function(e){t(d,e)}),void(i(d)||(p.children=d))}if("component"===o)return void(e[l]={component:r[0],data:r.slice(1)})
throw new TypeError("Invalid type")}var r={}
return t(r,e),r}function n(e){var t,n
e[1].constructor===Object?(t=e[1],n=e.slice(2)):(t={},n=e.slice(1))
var r=e[0],o=r.match(p),i={name:o?o[0]:"div",props:t,body:n},c=r.match(l)
c&&(c=c.map(a).join(" "),t.class?t.class+=" "+c:t.class=c)
var d=r.match(u)
d&&(t.id=a(d[0]))
var s=r.match(f)
return s&&(i.ref=a(s[0])),i}function r(e,t,n){n&&Object.keys(n).forEach(function(r){t&&t[r]||("on"===r.substr(0,2)?e.removeEventListener(r.substr(2),n[r],!1):e.removeAttribute(r))}),t&&Object.keys(t).forEach(function(r){var a=t[r]
if("style"===r&&a.constructor===Object)o(e.style,a,n&&n.style)
else{if(n&&n[r]===a)return
"on"===r.substr(0,2)?e.addEventListener(r.substr(2),a,!1):"boolean"==typeof a?a&&e.setAttribute(r,r):e.setAttribute(r,a)}})}function o(e,t,n){n&&Object.keys(n).forEach(function(n){t&&t[n]||(e[n]="")}),t&&Object.keys(t).forEach(function(r){var o=t[r]
n&&n[r]===o||(e[r]=t[r])})}function a(e){return e.substring(1)}function i(e){return!Object.keys(e).length}function c(){}var l=/\.[^.#$]+/g,u=/#[^.#$]+/,f=/\$[^.#$]+/,p=/^[^.#$]+/,d=[].slice
return e})
